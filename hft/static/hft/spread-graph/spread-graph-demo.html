<html>
<head>
    <script type="module" src="./spread-graph-new.js"></script>
    <script src="../node_modules/d3.min.js"></script>
    <style>
        spread-graph {
            width: 100%;
            height: 500px;
        }
    </style>
</head>
<body>
    <spread-graph
    ></spread-graph>

    <button type="button" onclick="add_order()">add random order</button>
    <button type="button" onclick="remove_order()">remove random order</button>

    <script>
        const spread_graph = document.querySelector('spread-graph');
        spread_graph.setAttribute('orders', '[]')

        function add_order() {
            const order = {
                price: 106 + Math.round(Math.random() * 14),
            }

            let cur_orders = JSON.parse(spread_graph.getAttribute('orders'));
            cur_orders.push(order);
            spread_graph.setAttribute('orders', JSON.stringify(cur_orders));
        }

        function remove_order() {
            let cur_orders = JSON.parse(spread_graph.getAttribute('orders'));
            if (!cur_orders) return;
            cur_orders.splice(Math.floor(Math.random()*cur_orders.length), 1);
            spread_graph.setAttribute('orders', JSON.stringify(cur_orders));
        }
    </script>
</body>
</html>